rely more on push/pop and less on memory calls